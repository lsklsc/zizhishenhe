webpackJsonp([5],{"5DlU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("hYS1"),o=a("F+jZ"),s=a("o5Dg"),l={components:{upload:r.a},data:function(){return{role_type:"",c_id:"",company_id:"",ruleForm:{street_coding:"",street_name:""},userObj:{},selectList:[],streetList:[],limt:1,baseUrl:"",companyInfo:{},rules:{name:[{required:!0,message:"请输入公司名称",trigger:"blur"}],admin:[{required:!0,message:"请输入负责人/法人姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入负责人联系电话",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],email:[{required:!0,pattern:/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/,message:"邮箱格式错误",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(t.ruleForm.company_picture)return e?void t.$confirm("确认提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.updataCompany(t.c_id,t.ruleForm).then(function(e){console.log(e),0==e.data.code?(t.$message.success("更新成功"),t.companyObj()):t.$message.console.error(e.data.msg)})}).catch(function(){t.$message.info("已取消更新")}):(console.log("error submit!!"),!1);t.$message.warning("请上传营业执照")})},resetForm:function(){var e=this;this.$confirm("确认提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.updataCompany(e.c_id).then(function(t){0==t.data.code?(e.$message.success("注销成功"),e.companyObj()):e.$message.console.error(t.data.msg)})}).catch(function(){e.$message.info("已取消注销")})},uploadSuccess:function(e){this.ruleForm.company_picture=e.join(",")},uploadSuccess1:function(e){this.userObj.picture=e.join(",")},imgClick:function(){var e=this;this.$confirm("确认提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={picture:e.userObj.picture};s.a.accountStatus(e.userObj.id,t).then(function(t){0==t.data.code?(e.$message.success("修改成功"),e.userObjDetail()):e.$message.console.error(t.data.msg)})}).catch(function(){e.$message.info("已取消修改")})},goBack:function(){this.$router.back(1)},companyObj:function(){var e=this,t={company_id:JSON.parse(localStorage.getItem("userInfo")).company_id};s.a.detailCompany(t).then(function(t){200==t.data.code&&(e.ruleForm=t.data.data.data.results[0],e.imageUrl=e.baseUrl+"/"+t.data.data.data.results[0].company_picture)})},userObjDetail:function(){var e=this,t={company_id:JSON.parse(localStorage.getItem("userInfo")).company_id};s.a.userDetail(t).then(function(t){0==t.data.code&&(e.userObj=t.data.data.data)})},serviceList:function(){var e=this,t={company_id:JSON.parse(localStorage.getItem("userInfo")).company_id};s.a.serviceData(t).then(function(t){0==t.data.code&&(e.selectList=t.data.data.data)})},streetData:function(){var e=this,t={area_coding:this.userObj.service_area};s.a.street_list(t).then(function(t){0==t.data.code&&(e.streetList=t.data.data.data)})}},mounted:function(){this.baseUrl=o.a,this.company_id=JSON.parse(localStorage.getItem("userInfo")).company_id,this.c_id=JSON.parse(localStorage.getItem("userInfo")).c_id,this.role_type=JSON.parse(localStorage.getItem("userInfo")).role_type,this.companyObj(),this.serviceList(),this.userObjDetail(),this.streetData()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-tabs",[a("el-tab-pane",{attrs:{label:"公司信息"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary"},on:{click:e.goBack}},[e._v("返回首页")])],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"title"},[e._v("公司信息")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"公司名称：",prop:"name"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人/法人姓名：",prop:"admin"}},[a("el-input",{model:{value:e.ruleForm.admin,callback:function(t){e.$set(e.ruleForm,"admin",t)},expression:"ruleForm.admin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人联系电话：",prop:"phone"}},[a("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址：",prop:"address"}},[a("el-input",{model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"社会统一信用代码：",prop:"credit_code"}},[a("el-input",{model:{value:e.ruleForm.credit_code,callback:function(t){e.$set(e.ruleForm,"credit_code",t)},expression:"ruleForm.credit_code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务区域：",prop:"service_area"}},[a("el-select",{attrs:{placeholder:"请选择服务区域",disabled:""},model:{value:e.ruleForm.service_area,callback:function(t){e.$set(e.ruleForm,"service_area",t)},expression:"ruleForm.service_area"}},e._l(e.selectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.coding}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"街道：",prop:"street_coding"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.street_name,callback:function(t){e.$set(e.ruleForm,"street_name",t)},expression:"ruleForm.street_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业执照："}},[a("upload",{ref:"upload",attrs:{imageUrl:e.ruleForm.company_picture},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),a("el-form-item",["1"==e.role_type?a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.resetForm()}}},[e._v("注销账号")]):e._e(),e._v(" "),"1"==e.role_type?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("更新信息")]):e._e()],1)],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"个人信息"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary"},on:{click:e.goBack}},[e._v("返回首页")])],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"title"},[e._v("个人信息")]),e._v(" "),a("el-form",{attrs:{rules:e.rules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"姓名："}},[a("el-input",{attrs:{disabled:""},model:{value:e.userObj.nickname,callback:function(t){e.$set(e.userObj,"nickname",t)},expression:"userObj.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录账号："}},[a("el-input",{attrs:{disabled:""},model:{value:e.userObj.username,callback:function(t){e.$set(e.userObj,"username",t)},expression:"userObj.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色："}},[a("el-input",{attrs:{disabled:""},model:{value:e.userObj.role,callback:function(t){e.$set(e.userObj,"role",t)},expression:"userObj.role"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像："}},[a("upload",{ref:"upload",attrs:{imageUrl:e.userObj.picture,uploadLimit:e.limt},on:{uploadSuccess:e.uploadSuccess1}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.imgClick()}}},[e._v("确认修改")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(l,n,!1,function(e){a("U7Pa")},"data-v-fa3d7c4a",null);t.default=i.exports},U7Pa:function(e,t){}});
//# sourceMappingURL=5.11f9415c994f4104915f.js.map