{"version":3,"sources":["webpack:///src/components/upload.vue","webpack:///./src/components/upload.vue?e588","webpack:///./src/components/upload.vue","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["token","localStorage","getItem","upload","props","imageUrl","type","String","default","mkdir","uploadLimit","Number","data","imageArr","urlString","dialogVisible","dialogImageUrl","headerObj","Authorization","Content-Type","watch","handler","newName","oldName","console","log","this","init","immediate","deep","mounted","methods","handlePictureCardPreview","file","url","clearFiles","$refs","onSuccess","response","fileList","urlArr","forEach","item","push","join","$emit","onRemove","arr","map","o","onExceed","$message","warning","onChange","split","beforeAvatarUpload","size","error","components_upload","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","multiple","action","list-type","header","name","beforeUpload","on-preview","file-list","on-change","on-success","on-remove","limit","on-exceed","_v","visible","on","update:visible","$event","width","src","alt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","__esModule","core","$JSON","JSON","stringify","it","apply","arguments"],"mappings":"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","file":"static/js/0.126cc738a923db051677.js","sourcesContent":["<template>\r\n  <div class=\"upload\">\r\n    <el-upload\r\n      multiple\r\n      action=\"http://filemanager.ztbory.com/v1/file/fileupload/\"\r\n      list-type=\"picture-card\"\r\n      :data=\"data\"\r\n      :header=\"headerObj\"\r\n      name=\"files\"\r\n      :beforeUpload=\"beforeAvatarUpload\"\r\n      :on-preview=\"handlePictureCardPreview\"\r\n      :file-list=\"imageArr\"\r\n      :on-change=\"onChange\"\r\n      :on-success=\"onSuccess\"\r\n      :on-remove=\"onRemove\"\r\n      :limit=\"uploadLimit\"\r\n      :on-exceed=\"onExceed\"\r\n      ref=\"upload\"\r\n    >\r\n      <i class=\"el-icon-plus\"></i>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nlet token = localStorage.getItem(\"token\"); // 获取token\r\nexport default {\r\n  props: {\r\n    imageUrl: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    mkdir: {\r\n      type: String,\r\n      default: \"qualification\"\r\n    },\r\n    uploadLimit: {\r\n      type: Number,\r\n      default: 5\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      data: {\r\n        mkdir: \"qualification\" //测试用 qianlei\r\n      },\r\n      imageArr: [],\r\n      urlString: \"\",\r\n      dialogVisible: false,\r\n      dialogImageUrl: \"\",\r\n      headerObj: {\r\n        Authorization: `Token ${token}`,\r\n        \"Content-Type\": \"multipart/form-data\"\r\n      }\r\n    };\r\n  },\r\n  watch: {\r\n    imageUrl: {\r\n      handler(newName, oldName) {\r\n        console.log(newName, this.urlString);\r\n        if (newName != this.urlString || !newName) {\r\n          this.urlString = newName;\r\n          this.imageUrl = newName;\r\n          this.init();\r\n        }\r\n      },\r\n      immediate: true,\r\n      deep: true\r\n    },\r\n    mkdir: {\r\n      handler(newName, oldName) {\r\n        this.data.mkdir = newName;\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    clearFiles() {\r\n      this.$refs[\"upload\"].clearFiles();\r\n    },\r\n    onSuccess(response, file, fileList) {\r\n      let urlArr = [];\r\n      fileList.forEach(item => {\r\n        if (item.response) {\r\n          urlArr.push(item.response.data);\r\n        } else {\r\n          urlArr.push(item.url);\r\n        }\r\n      });\r\n      this.urlString = urlArr.join(\",\");\r\n      this.$emit(\"uploadSuccess\", urlArr);\r\n    },\r\n    onRemove(file, fileList) {\r\n      this.imageArr = fileList;\r\n      let arr = fileList.map(o => o.url);\r\n      this.urlString = arr.join(\",\");\r\n      this.$emit(\"uploadSuccess\", arr);\r\n    },\r\n    //文件超出个数限制时的钩子\r\n    onExceed() {\r\n      this.$message.warning(`最多上传${this.uploadLimit}张图片`);\r\n    },\r\n    onChange(file, fileList) {\r\n      console.log(file, fileList);\r\n    },\r\n    init() {\r\n      if (this.imageUrl) {\r\n        let arr = this.imageUrl.split(\",\");\r\n        this.imageArr = arr.map(o => {\r\n          return {\r\n            url: o\r\n          };\r\n        });\r\n      } else {\r\n        this.imageArr = [];\r\n      }\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isLt5M = file.size / 1024 / 1024 < 5;\r\n      if (!isLt5M) {\r\n        this.$message.error(\"上传图片大小不能超过5MB!\");\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.upload >>> .el-upload--picture-card {\r\n  width: 100px;\r\n  height: 100px;\r\n  border: 1px dashed #13c3c7;\r\n}\r\n.upload >>> .el-upload {\r\n  width: 100px;\r\n  height: 100px;\r\n  line-height: 100px;\r\n}\r\n.upload >>> .el-upload-list--picture-card .el-upload-list__item {\r\n  width: 100px;\r\n  height: 100px;\r\n  line-height: 100px;\r\n}\r\n.upload >>> .el-upload-list--picture-card .el-upload-list__item-thumbnail {\r\n  width: 100px;\r\n  height: 100px;\r\n  line-height: 100px;\r\n}\r\n.upload >>> .avatar {\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/upload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload\"},[_c('el-upload',{ref:\"upload\",attrs:{\"multiple\":\"\",\"action\":\"http://filemanager.ztbory.com/v1/file/fileupload/\",\"list-type\":\"picture-card\",\"data\":_vm.data,\"header\":_vm.headerObj,\"name\":\"files\",\"beforeUpload\":_vm.beforeAvatarUpload,\"on-preview\":_vm.handlePictureCardPreview,\"file-list\":_vm.imageArr,\"on-change\":_vm.onChange,\"on-success\":_vm.onSuccess,\"on-remove\":_vm.onRemove,\"limit\":_vm.uploadLimit,\"on-exceed\":_vm.onExceed}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f1e0d14\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/upload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f1e0d14\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./upload.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f1e0d14\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./upload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5f1e0d14\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/upload.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 0","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 0"],"sourceRoot":""}