webpackJsonp([0],{RVch:function(i,e){},hYS1:function(i,e,t){"use strict";var a=t("F+jZ"),n={props:{imageUrl:{type:String,default:""},mkdir:{type:String,default:"qualification"},uploadLimit:{type:Number,default:5}},data:function(){return{imageArr:[],data:{mkdir:""},urlString:"",dialogVisible:!1,dialogImageUrl:"",action:""}},watch:{imageUrl:{handler:function(i,e){console.log(i,this.urlString),i==this.urlString&&i||(this.urlString=i,this.imageUrl=i,this.init())},immediate:!0,deep:!0},mkdir:{handler:function(i,e){this.data.mkdir=i},immediate:!0}},mounted:function(){"https://api.ztbory.com/dev"==a.c&&(this.data.mkdir="qianlei"),this.action=a.c+"/upload/images/",console.log(this.action)},methods:{handlePictureCardPreview:function(i){console.log(i),this.dialogImageUrl=i.url,this.dialogVisible=!0},clearFiles:function(){this.$refs.upload.clearFiles()},onSuccess:function(i,e,t){console.log(t);var a=[];t.forEach(function(i){i.response?a.push(i.response.data):a.push(i.url)}),console.log(a,111),console.log(this.imageArr,123),this.urlString=a.join(","),this.$emit("uploadSuccess",a)},onRemove:function(i,e){this.imageArr=e;var t=e.map(function(i){return i.url});this.urlString=t.join(","),this.$emit("uploadSuccess",t)},onExceed:function(){this.$message.warning("最多上传"+this.uploadLimit+"张图片")},onChange:function(i,e){},header:function(){var i={Authorization:"Token "+JSON.parse(localStorage.getItem("session")).token,"Content-Type":"multipart/form-data"};return i},init:function(){if(this.imageUrl){var i=this.imageUrl.split(",");this.imageArr=i.map(function(i){return{url:i}})}else this.imageArr=[]},beforeAvatarUpload:function(i){if(!(i.size/1024/1024<5))return this.$message.error("上传图片大小不能超过5MB!"),!1}}},r={render:function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"upload"},[t("el-upload",{ref:"upload",attrs:{action:i.action,"list-type":"picture-card",data:i.data,header:i.header,name:"files",beforeUpload:i.beforeAvatarUpload,"on-preview":i.handlePictureCardPreview,"file-list":i.imageArr,"on-change":i.onChange,"on-success":i.onSuccess,"on-remove":i.onRemove,limit:i.uploadLimit,"on-exceed":i.onExceed}},[t("i",{staticClass:"el-icon-plus"})]),i._v(" "),t("el-dialog",{attrs:{visible:i.dialogVisible},on:{"update:visible":function(e){i.dialogVisible=e}}},[t("img",{attrs:{width:"100%",src:i.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var o=t("VU/8")(n,r,!1,function(i){t("RVch")},"data-v-ee2539e8",null);e.a=o.exports},mvHQ:function(i,e,t){i.exports={default:t("qkKv"),__esModule:!0}},qkKv:function(i,e,t){var a=t("FeBl"),n=a.JSON||(a.JSON={stringify:JSON.stringify});i.exports=function(i){return n.stringify.apply(n,arguments)}}});
//# sourceMappingURL=0.aeecdab0335fef5ecb4a.js.map