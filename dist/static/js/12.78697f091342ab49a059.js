webpackJsonp([12],{KPNA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dd8w"),o=r.n(a),i=r("hYS1"),l=r("o5Dg"),s={components:{upload:i.a},data:function(){return{ruleForm:{},serviceList:[],streetList:[],rules:{name:[{required:!0,message:"请输入公司名称",trigger:"blur"}],admin:[{required:!0,message:"请输入负责人/法人",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"change"}],address:[{required:!0,message:"请输入地址",trigger:"change"}],credit_code:[{required:!0,message:"请输入社会统一信用代码",trigger:"change"}],service_area:[{required:!0,message:"请选择服务区域",trigger:"change"}],street_coding:[{required:!0,message:"请选择街道",trigger:"change"}],email:[{required:!0,pattern:/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/,message:"邮箱格式错误",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(t.ruleForm.quali_file)if(t.ruleForm.company_picture){if(!e)return console.log("error submit!!"),!1;var r=o()({},t.ruleForm),a=[],i=[];t.ruleForm.street_coding.forEach(function(e){var r=t.streetList.find(function(t){return t.coding===e});a.push(r.name),i.push(r.coding)}),r.street_name=a.join(","),r.street_coding=i.join(","),l.a.addCompany(r).then(function(e){0==e.data.code?(t.$notify({title:"提交成功!",type:"success",offset:100}),setTimeout(function(){window.location.reload()},1500)):t.$notify({title:e.data.msg,type:"error",offset:100})})}else t.$message.warning("请上传营业执照");else t.$message.warning("请上传资质附件")})},uploadSuccess:function(e){this.ruleForm.quali_file=e.join(",")},uploadSuccess1:function(e){this.ruleForm.contract_file=e.join(",")},uploadSuccess2:function(e){this.ruleForm.company_picture=e.join(",")},areaChange:function(e){var t=this;this.ruleForm.street_name="",this.ruleForm.street_coding="";var r={area_coding:e};l.a.street_list(r).then(function(e){0==e.data.code&&(t.streetList=e.data.data.data)})},serviceData:function(){var e=this;l.a.serviceData().then(function(t){0==t.data.code&&(e.serviceList=t.data.data.data)})}},mounted:function(){this.serviceData()},created:function(){this.$set(this.ruleForm,"street_coding",[]),window.localStorage.clear()}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("div",{staticClass:"left"},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",[r("div",{staticClass:"title"},[e._v("收运单位账号申请")])]),e._v(" "),r("div",{staticStyle:{display:"flex"}},[r("el-form-item",{attrs:{prop:"name"}},[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("公司名称：\n          "),r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"admin"}},[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("负责人/法人姓名：\n          "),r("el-input",{model:{value:e.ruleForm.admin,callback:function(t){e.$set(e.ruleForm,"admin",t)},expression:"ruleForm.admin"}})],1)],1),e._v(" "),r("div",{staticStyle:{display:"flex"}},[r("el-form-item",{attrs:{prop:"address"}},[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("地址：\n          "),r("el-input",{model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"credit_code"}},[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("社会统一信用代码：\n          "),r("el-input",{model:{value:e.ruleForm.credit_code,callback:function(t){e.$set(e.ruleForm,"credit_code",t)},expression:"ruleForm.credit_code"}})],1)],1),e._v(" "),r("div",{staticStyle:{display:"flex"}},[r("el-form-item",{attrs:{prop:"email"}},[r("div",[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("邮箱：")]),e._v(" "),r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"service_area"}},[r("div",[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("服务区域：")]),e._v(" "),r("el-select",{attrs:{placeholder:"请选择服务区域"},on:{change:e.areaChange},model:{value:e.ruleForm.service_area,callback:function(t){e.$set(e.ruleForm,"service_area",t)},expression:"ruleForm.service_area"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.coding,attrs:{label:e.name,value:e.coding}})}),1)],1)],1),e._v(" "),r("div",{staticStyle:{display:"flex"}},[r("el-form-item",{attrs:{prop:"phone"}},[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("负责人联系电话：\n          "),r("el-input",{attrs:{maxlength:"11"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"street_coding"}},[r("div",[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("街道：")]),e._v(" "),r("el-select",{attrs:{multiple:"","collapse-tag":"",placeholder:"请选择街道"},model:{value:e.ruleForm.street_coding,callback:function(t){e.$set(e.ruleForm,"street_coding",t)},expression:"ruleForm.street_coding"}},e._l(e.streetList,function(e){return r("el-option",{key:e.coding,attrs:{label:e.name,value:e.coding}})}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"quali_file"}},[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("资质附件：\n        "),r("upload",{ref:"upload",attrs:{imageUrl:e.ruleForm.quali_file},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),r("el-form-item",{attrs:{label:"",prop:"company_picture"}},[r("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("营业执照：\n        "),r("upload",{ref:"upload",attrs:{imageUrl:e.ruleForm.company_picture},on:{uploadSuccess:e.uploadSuccess2}})],1),e._v(" "),r("el-button",{staticClass:"submitBtn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交申请")])],1)],1),e._v(" "),r("div",{staticClass:"right"})])},staticRenderFns:[]};var c=r("VU/8")(s,n,!1,function(e){r("j98T")},"data-v-225942d7",null);t.default=c.exports},j98T:function(e,t){}});
//# sourceMappingURL=12.78697f091342ab49a059.js.map